<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Frequently Asked Questions - Beam Documentation</title>

  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../theme/css/beam.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="css/beam.css"/>

  
  <script>
    // Current page data
    var mkdocs_page_name = "Frequently Asked Questions";
    var mkdocs_page_input_path = "about/faq.md";
    var mkdocs_page_url = "/about/faq/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Beam Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Frequently Asked Questions</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#how-does-beam-compare-with-x">How does beam compare with &lt;x&gt;?</a></li>
    

    <li class="toctree-l2"><a href="#help-the-type-checker-keeps-complaining-about-syntax-types">Help! The type checker keeps complaining about Syntax types</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">User Guide</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../user-guide/getting-started/">Getting Started</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user-guide/models/">Models</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user-guide/databases/">Databases</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user-guide/queries/basic/">Basic Queries</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user-guide/queries/select/">More complex SELECTs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user-guide/queries/ordering/">Ordering</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user-guide/queries/relationships/">Relationships</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user-guide/queries/aggregates/">Aggregates</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user-guide/queries/combining-queries/">Combining queries</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user-guide/queries/data-types/">Common data types</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user-guide/queries/window-functions/">Window functions</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Schema management</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../schema-guide/migrations/">The Migrations Framework</a>
                </li>
                <li class="">
                    
    <a class="" href="../../schema-guide/tool/">The beam-migrate tool</a>
                </li>
                <li class="">
                    
    <a class="" href="../../schema-guide/supported/">Supported migrations</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Backends</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../user-guide/backends/beam-postgres/">beam-postgres</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user-guide/backends/beam-sqlite/">beam-sqlite</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user-guide/custom-backends/">Writing a Custom Backend</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Reference</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../reference/expression/">Expressions</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reference/queries/">Queries</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reference/extensibility/">Extending</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">About</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../compatibility/">Compatibility Matrix</a>
                </li>
                <li class="">
                    
    <a class="" href="../license/">License</a>
                </li>
                <li class="">
                    
    <a class="" href="../release-notes/">Release Notes</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Beam Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
    
    <li>Frequently Asked Questions</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="how-does-beam-compare-with-x">How does <code>beam</code> compare with <code>&lt;x&gt;</code>?</h2>
<h2 id="help-the-type-checker-keeps-complaining-about-syntax-types">Help! The type checker keeps complaining about <code>Syntax</code> types</h2>
<p>Suppose you had the following code to run a query over an arbitrary backend that
supported the SQL92 syntax.</p>
<pre><code  class="haskell">listEmployees :: (IsSql92Syntax cmd, MonadBeam cmd be hdl m) =&gt; m [Employee]
listEmployees = runSelectReturningList $ select (all_ (employees employeeDb))
</code></pre>

<p>You may get an error message like the following</p>
<pre><code  class="">MyQueries.hs:1:1: error:
    * Could not deduce: Sql92ProjectionExpressionSyntax
                          (Sql92SelectTableProjectionSyntax
                             (Sql92SelectSelectTableSyntax (Sql92SelectSyntax cmd)))
                        ~
                        Sql92SelectTableExpressionSyntax
                          (Sql92SelectSelectTableSyntax (Sql92SelectSyntax cmd))
        arising from a use of 'select'
</code></pre>

<p>Beam uses a <a href="http://okmij.org/ftp/tagless-final/JFP.pdf">finally-tagless</a>
encoding for syntaxes. This means we never deal with concrete syntax types
internally, just types that fulfill certain constraints (in this case, being a
valid description of a SQL92 syntax). This works really nicely for
extensibility, but makes the types slightly confusing. Here, the type checker is
complaining that it cannot prove that the type of expressions used in
projections is the same as the type of expressions used in <code>WHERE</code> and <code>HAVING</code>
clauses. Of course, any sane SQL92 syntax would indeed meet this criteria, but
this criteria is difficult to enforce at the type class level (it leads to
cycles in superclasses, which requires the scary-looking
<code>UndecidableSuperclasses</code> extension in GHC).</p>
<p>Nevertheless, we can avoid all this hullabaloo by using the <code>Sql92SanityCheck</code>
constraint synonym. This takes a command syntax and asserts all the type
equalities that a sane SQL92 syntax would support. Thus the code above becomes.</p>
<pre><code  class="haskell">listEmployees :: ( IsSql92Syntax cmd, Sql92SanityCheck cmd
                 , MonadBeam cmd be hdl m)
              =&gt; m [Employee]
listEmployees = runSelectReturningList $ select (all_ (employees employeeDb))
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../user-guide/getting-started/" class="btn btn-neutral float-right" title="Getting Started">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../.." class="btn btn-neutral" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../.." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../user-guide/getting-started/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

    <script src="../../js/theme.js"></script>
<script type="text/javascript" language="javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script type="text/javascript" language="javascript">
 $(document.body).tab();
</script>


</body>
</html>
